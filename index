<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Tarot Oracle</title>
    <style>
        :root {
            --ios-blue: #007aff;
            --ios-bg: #000000;
            --ios-secondary: #1c1c1e;
            --text: #ffffff;
            --gray: #8e8e93;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--ios-bg);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        header {
            position: fixed; top: 0; width: 100%; z-index: 100;
            background: rgba(25, 25, 25, 0.8);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-bottom: 0.5px solid rgba(255, 255, 255, 0.1);
            padding: 60px 20px 15px 20px; text-align: center;
        }
        header h1 { margin: 0; font-size: 17px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }

        nav {
            position: fixed; bottom: 0; width: 100%; z-index: 100;
            background: rgba(25, 25, 25, 0.8);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-top: 0.5px solid rgba(255, 255, 255, 0.1);
            display: flex; justify-content: space-around;
            padding: 10px 10px 35px 10px;
        }

        .view {
            display: none;
            height: 100vh;
            overflow-y: auto;
            padding: 120px 20px 150px 20px;
            -webkit-overflow-scrolling: touch;
        }
        .view.active { display: block; animation: fadeIn 0.3s ease-out; }

        .tab { display: flex; flex-direction: column; align-items: center; color: var(--gray); font-size: 10px; cursor: pointer; }
        .tab.active { color: var(--ios-blue); }
        .tab-icon { font-size: 22px; margin-bottom: 4px; }

        .btn {
            background: var(--ios-blue); color: white; border: none; width: 100%;
            height: 52px; border-radius: 14px; font-size: 17px; font-weight: 600;
            margin-top: 20px; cursor: pointer; transition: opacity 0.2s;
        }
        .btn:active { opacity: 0.5; }

        .hero { text-align: center; padding-top: 40px; }
        .icon-circle { 
            width: 80px; height: 80px; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 20px; 
            margin: 0 auto 30px auto; font-size: 44px; line-height: 80px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .card-slot { margin-bottom: 40px; text-align: center; }
        .slot-label { font-size: 11px; font-weight: 800; color: #ffd700; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 12px; }
        
        .card {
            width: 180px; height: 280px; background: linear-gradient(145deg, #2c2c2e, #1c1c1e); 
            border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); margin: 0 auto;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
        }
        .card.reversed { transform: rotate(180deg); }
        .card-emoji { font-size: 64px; margin-bottom: 15px; }
        .card-name { font-size: 18px; font-weight: 700; color: #ffd700; }
        .meaning { color: var(--gray); font-size: 15px; margin-top: 15px; font-style: italic; padding: 0 15px; line-height: 1.4; }

        #modal {
            position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 200;
            display: none; align-items: flex-end;
        }
        .sheet {
            background: #1c1c1e; width: 100%; border-radius: 25px 25px 0 0;
            padding: 20px 20px 60px 20px; text-align: center;
            transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.1, 0.9, 0.2, 1);
        }
        .sheet.open { transform: translateY(0); }
        .handle { width: 36px; height: 5px; background: #333; border-radius: 3px; margin: 0 auto 20px auto; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <header>
        <h1 id="header-text">Oracle</h1>
    </header>

    <div id="view-home" class="view">
        <div class="hero">
            <div class="icon-circle">ðŸ”®</div>
            <h2 style="font-size: 34px; font-weight: 700; margin: 0 0 10px 0; letter-spacing: -1px;">Tarot Oracle</h2>
            <p style="color: var(--gray); font-size: 17px; margin-bottom: 40px; padding: 0 20px;">Unlock the mysteries of your path. Seek answers from the cards.</p>
            <button class="btn" onclick="app.draw()">Get Reading</button>
        </div>
    </div>

    <div id="view-reading" class="view">
        <div id="spread-container"></div>
        <button class="btn" style="background: #2c2c2e; margin-top: 40px;" onclick="app.draw()">New Reading</button>
    </div>

    <div id="view-deck" class="view">
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px;" id="deck-grid"></div>
    </div>

    <nav>
        <div class="tab" id="tab-home" onclick="app.nav('home')">
            <span class="tab-icon">âœ¨</span>
            <span>Home</span>
        </div>
        <div class="tab" id="tab-reading" onclick="app.nav('reading')">
            <span class="tab-icon">ðŸ”®</span>
            <span>Reading</span>
        </div>
        <div class="tab" id="tab-deck" onclick="app.nav('deck')">
            <span class="tab-icon">ðŸ“–</span>
            <span>Library</span>
        </div>
    </nav>

    <div id="modal" onclick="app.close()">
        <div class="sheet" id="sheet" onclick="event.stopPropagation()">
            <div class="handle"></div>
            <div id="sheet-content"></div>
            <button class="btn" style="background: #333; margin-top: 30px;" onclick="app.close()">Dismiss</button>
        </div>
    </div>

    <script>
        const DECK = [
            { n: "The Fool", i: "ðŸƒ", u: "New beginnings, optimism, leap of faith.", r: "Recklessness, taking unnecessary risks." },
            { n: "Magician", i: "ðŸª„", u: "Manifestation, resourcefulness, power.", r: "Manipulation, poor planning, hidden talents." },
            { n: "Priestess", i: "ðŸŒ™", u: "Intuition, sacred knowledge, mystery.", r: "Secrets, disconnected from intuition." },
            { n: "Empress", i: "ðŸŒ¿", u: "Femininity, nature, abundance, growth.", r: "Creative block, dependence on others." },
            { n: "Emperor", i: "ðŸ‘‘", u: "Authority, structure, solid foundation.", r: "Domination, rigidity, lack of discipline." },
            { n: "Hierophant", i: "ðŸ›ï¸", u: "Tradition, conformity, spiritual wisdom.", r: "Personal beliefs, challenging status quo." },
            { n: "Lovers", i: "â¤ï¸", u: "Love, harmony, relationships, choices.", r: "Self-love, disharmony, misalignment." },
            { n: "Chariot", i: "âš”ï¸", u: "Direction, control, willpower, victory.", r: "Lack of control, aggression, obstacles." },
            { n: "Strength", i: "ðŸ¦", u: "Courage, persuasion, influence, compassion.", r: "Inner strength, self-doubt, low energy." },
            { n: "Hermit", i: "ðŸ®", u: "Introspection, soul-searching, guidance.", r: "Isolation, loneliness, withdrawal." },
            { n: "Fortune", i: "ðŸŽ¡", u: "Good luck, karma, life cycles, destiny.", r: "Bad luck, resistance to change." },
            { n: "Justice", i: "âš–ï¸", u: "Justice, fairness, truth, cause and effect.", r: "Unfairness, lack of accountability." },
            { n: "Hanged Man", i: "ðŸ‘£", u: "Pause, surrender, letting go, perspective.", r: "Delays, resistance, stalling." },
            { n: "Death", i: "ðŸ’€", u: "Endings, change, transformation.", r: "Resistance to change, inner purging." },
            { n: "Temperance", i: "ðŸ·", u: "Balance, moderation, patience, purpose.", r: "Imbalance, excess, self-healing." },
            { n: "The Devil", i: "ðŸ”¥", u: "Shadow self, attachment, addiction.", r: "Releasing limiting beliefs, detachment." },
            { n: "The Tower", i: "âš¡", u: "Sudden change, upheaval, revelation.", r: "Personal transformation, averting disaster." },
            { n: "The Star", i: "âœ¨", u: "Hope, faith, renewal, spirituality.", r: "Lack of faith, despair, self-trust." },
            { n: "The Moon", i: "ðŸŒ’", u: "Fear, anxiety, illusion, intuition.", r: "Release of fear, repressed emotion." },
            { n: "The Sun", i: "â˜€ï¸", u: "Positivity, fun, warmth, vitality.", r: "Inner child, feeling down." },
            { n: "Judgement", i: "ðŸŽº", u: "Judgement, rebirth, inner calling.", r: "Self-doubt, inner critic." },
            { n: "The World", i: "ðŸŒ", u: "Completion, integration, travel.", r: "Seeking personal closure, delays." }
        ];

        const app = {
            nav(viewId) {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                const activeTab = document.getElementById('tab-' + viewId);
                if (activeTab) activeTab.classList.add('active');

                document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
                const activeView = document.getElementById('view-' + viewId);
                if (activeView) activeView.classList.add('active');

                document.getElementById('header-text').innerText = viewId === 'home' ? 'ORACLE' : viewId.toUpperCase();
                
                if(viewId === 'deck') this.renderDeck();
            },

            draw() {
                const container = document.getElementById('spread-container');
                const spread = [...DECK].sort(() => Math.random() - 0.5).slice(0, 3);
                
                container.innerHTML = spread.map((c, i) => {
                    const isRev = Math.random() > 0.7;
                    return `
                        <div class="card-slot">
                            <div class="slot-label">${['Past', 'Present', 'Future'][i]}</div>
                            <div class="card ${isRev ? 'reversed' : ''}" onclick="app.open('${c.n}', '${c.i}', '${c.u.replace(/'/g, "\\'")}', '${c.r.replace(/'/g, "\\'")}', ${isRev})">
                                <div class="card-emoji">${c.i}</div>
                                <div class="card-name">${c.n}</div>
                            </div>
                            <div class="meaning">"${isRev ? c.r : c.u}"</div>
                        </div>
                    `;
                }).join('');

                this.nav('reading');
            },

            renderDeck() {
                const grid = document.getElementById('deck-grid');
                grid.innerHTML = DECK.map(c => `
                    <div style="background: #1c1c1e; border-radius: 16px; padding: 20px 10px; text-align: center; border: 1px solid rgba(255,255,255,0.05);" onclick="app.open('${c.n}', '${c.i}', '${c.u.replace(/'/g, "\\'")}', '${c.r.replace(/'/g, "\\'")}', false)">
                        <div style="font-size: 32px; margin-bottom: 8px;">${c.i}</div>
                        <div style="font-size: 10px; color: #888; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;">${c.n}</div>
                    </div>
                `).join('');
            },

            open(n, i, u, r, isRev) {
                const content = document.getElementById('sheet-content');
                content.innerHTML = `
                    <div class="icon-circle" style="background: #2c2c2e; margin-bottom: 25px;">${i}</div>
                    <h2 style="margin: 0 0 10px 0; font-size: 24px;">${n}</h2>
                    <p style="color: #ffd700; font-size: 12px; font-weight: 800; margin-bottom: 25px; letter-spacing: 1px;">${isRev ? 'REVERSED' : 'UPRIGHT'}</p>
                    <div style="text-align: left; padding: 0 10px;">
                        <p style="color: #007aff; font-size: 11px; font-weight: 800; margin-bottom: 6px; letter-spacing: 1px;">UPRIGHT MEANING</p>
                        <p style="margin-bottom: 24px; font-size: 16px; line-height: 1.4; color: #eee;">${u}</p>
                        <p style="color: #ff3b30; font-size: 11px; font-weight: 800; margin-bottom: 6px; letter-spacing: 1px;">REVERSED MEANING</p>
                        <p style="font-size: 16px; line-height: 1.4; color: #eee;">${r}</p>
                    </div>
                `;
                document.getElementById('modal').style.display = 'flex';
                setTimeout(() => document.getElementById('sheet').classList.add('open'), 10);
            },

            close() {
                document.getElementById('sheet').classList.remove('open');
                setTimeout(() => document.getElementById('modal').style.display = 'none', 350);
            }
        };

        // --- THE FIX: This line starts the app automatically ---
        window.onload = () => {
            app.nav('home');
        };
    </script>
</body>
</html>
