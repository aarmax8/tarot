<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aura Tarot - Essential Edition</title>
    
    <!-- React & Babel for Standalone Browser Support -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        body { 
          font-family: 'Cormorant Garamond', serif; 
          margin: 0; 
          background-color: #fcfcf7; 
          overflow-x: hidden;
          -webkit-font-smoothing: antialiased;
        }
        .font-sans { font-family: 'Montserrat', sans-serif; }
        
        @media (max-width: 400px) {
          .iPhoneTitle { 
            font-size: 1.65rem !important; 
            letter-spacing: 0.3em !important; 
            line-height: 1.2 !important; 
          }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.8s cubic-bezier(0.19, 1, 0.22, 1) forwards; }
        
        .momentum-scroll { -webkit-overflow-scrolling: touch; overflow-y: scroll; }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #d4af3744; border-radius: 10px; }
        .line-clamp-3 { display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

        .silk-texture {
            background-image: url('https://www.transparenttextures.com/patterns/clean-gray-paper.png');
            background-repeat: repeat;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // Note: The API key is injected by the environment. 
        // To use this on your own site, you would need to insert a Gemini API key here.
        const apiKey = ""; 

        const Icon = ({ name, size = 20, className = "" }) => {
            const common = { width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "1.2", strokeLinecap: "round", strokeLinejoin: "round", className };
            if (name === "Sparkles") return <svg {...common}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/></svg>;
            if (name === "RefreshCw") return <svg {...common}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M3 21v-5h5"/></svg>;
            if (name === "Search") return <svg {...common}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>;
            if (name === "X") return <svg {...common}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>;
            if (name === "RotateCw") return <svg {...common}><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/></svg>;
            if (name === "Compass") return <svg {...common}><circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/></svg>;
            if (name === "ChevronDown") return <svg {...common}><path d="m6 9 6 6 6-6"/></svg>;
            if (name === "CheckCircle") return <svg {...common}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>;
            if (name === "Star") return <svg {...common}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>;
            return null;
        };

        const ZODIAC_SIGNS = ["Aries", "Taurus", "Gemini", "Cancer", "Leo", "Virgo", "Libra", "Scorpio", "Sagittarius", "Capricorn", "Aquarius", "Pisces"];
        
        const TAGLINE_OPTIONS = [
            "Minimalist Wisdom for Conscious Souls", "Where Intuition Meets Absolute Clarity", "Your Path, Distilled to Its Essence",
            "Pure Insight for the Modern Path", "The Quiet Voice of Internal Wisdom", "Stripping Back the Noise to Find the Truth",
            "Ancient Symbols, Modern Insights", "A Clear Mirror for the Inner Self", "Practical Magic for Everyday Living", "Strategic Insights from the Arcanum"
        ];

        const TAROT_DECK = [
            { name: "The Fool", suit: "Major" }, { name: "The Magician", suit: "Major" }, { name: "The High Priestess", suit: "Major" },
            { name: "The Empress", suit: "Major" }, { name: "The Emperor", suit: "Major" }, { name: "The Hierophant", suit: "Major" },
            { name: "The Lovers", suit: "Major" }, { name: "The Chariot", suit: "Major" }, { name: "Strength", suit: "Major" },
            { name: "The Hermit", suit: "Major" }, { name: "Wheel of Fortune", suit: "Major" }, { name: "Justice", suit: "Major" },
            { name: "The Hanged Man", suit: "Major" }, { name: "Death", suit: "Major" }, { name: "Temperance", suit: "Major" },
            { name: "The Devil", suit: "Major" }, { name: "The Tower", suit: "Major" }, { name: "The Star", suit: "Major" },
            { name: "The Moon", suit: "Major" }, { name: "The Sun", suit: "Major" }, { name: "Judgement", suit: "Major" },
            { name: "The World", suit: "Major" },
            ...['Ace', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine', 'Ten', 'Page', 'Knight', 'Queen', 'King'].flatMap(rank => 
                ['Cups', 'Pentacles', 'Swords', 'Wands'].map(suit => ({ name: `${rank} of ${suit}`, suit: suit }))
            )
        ];

        const EssentialIcon = ({ type }) => {
            const strokeColor = "currentColor";
            const common = { viewBox: "0 0 24 24", fill: "none", stroke: strokeColor, strokeWidth: "0.8", className: "w-12 h-12" };
            if (type === 'Major') return <svg {...common} className="w-12 h-12 opacity-40"><circle cx="12" cy="12" r="9" /><path d="M12 3v18M3 12h18M18.36 5.64l-12.72 12.72M5.64 5.64l12.72 12.72" /><circle cx="12" cy="12" r="2" fill={strokeColor} /></svg>;
            if (type === 'Cups') return <svg {...common} className="w-12 h-12 text-blue-400"><path d="M7 5h10M8 5v6c0 2.2 1.8 4 4 4s4-1.8 4-4V5M12 15v4M9 20h6" /><circle cx="12" cy="8" r="1" fill={strokeColor} /></svg>;
            if (type === 'Pentacles') return <svg {...common} className="w-12 h-12 text-amber-600"><circle cx="12" cy="12" r="8" /><path d="M12 4v16M4 12h16M12 12l5.66-5.66M6.34 17.66l5.66-5.66M12 12l-5.66-5.66M17.66 17.66l-5.66-5.66" /><circle cx="12" cy="12" r="1.5" fill={strokeColor} /></svg>;
            if (type === 'Swords') return <svg {...common} className="w-12 h-12 text-slate-400"><path d="M12 3v14M9 17h6M12 17v4M11 21h2" /><path d="M12 3l-2 4h4l-2-4z" fill={strokeColor} /><circle cx="12" cy="10" r="0.5" fill={strokeColor} /></svg>;
            if (type === 'Wands') return <svg {...common} className="w-12 h-12 text-amber-800"><path d="M8 21l8-18M11 17l2-1M9 13l2-1M7 9l2-1" /><circle cx="14.5" cy="5.5" r="1" fill={strokeColor} /></svg>;
            return null;
        };

        const App = () => {
            const [userZodiac, setUserZodiac] = useState('Scorpio');
            const [selectionMode, setSelectionMode] = useState('manual');
            const [drawnCards, setDrawnCards] = useState([]);
            const [reading, setReading] = useState("");
            const [activeTagline, setActiveTagline] = useState("");
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState(null);
            const [manualSelection, setManualSelection] = useState([null, null, null]);
            const [searchQuery, setSearchQuery] = useState("");
            const [isPickerOpen, setIsPickerOpen] = useState(false);
            const [activePickerSlot, setActivePickerSlot] = useState(null);

            const groupedDeck = useMemo(() => {
                const search = searchQuery.toLowerCase();
                const filtered = TAROT_DECK.filter(card => card.name.toLowerCase().includes(search) || card.suit.toLowerCase().includes(search));
                return {
                    "Major Arcana": filtered.filter(c => c.suit === "Major"),
                    "Cups": filtered.filter(c => c.suit === "Cups"),
                    "Pentacles": filtered.filter(c => c.suit === "Pentacles"),
                    "Swords": filtered.filter(c => c.suit === "Swords"),
                    "Wands": filtered.filter(c => c.suit === "Wands"),
                };
            }, [searchQuery]);

            const callGemini = async (prompt, retries = 3) => {
                if (!apiKey) {
                    throw new Error("Missing API Key. This app requires a Gemini API Key to generate readings outside of the preview environment.");
                }
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        systemInstruction: { parts: [{ text: "You are an expert Tarot reader for The Essential Tarot by Chloe Zarka Grinsnir. Poetic, minimalist. End with TAGLINE: [phrase]." }] }
                    })
                });
                if (!response.ok) throw new Error("API call failed.");
                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            };

            const generateReading = async (cards) => {
                setIsLoading(true); setReading(""); setError(null);
                const cardDetails = cards.map(c => `${c.name} (${c.isReversed ? 'Reversed' : 'Upright'})`).join(', ');
                const prompt = `Querent: ${userZodiac}. Cards: ${cardDetails}. Professional 3-paragraph reading for Essential Tarot. End with TAGLINE: [phrase from list].`;
                
                try {
                    const result = await callGemini(prompt);
                    const tagIdx = result.toUpperCase().lastIndexOf("TAGLINE:");
                    if (tagIdx !== -1) {
                        setReading(result.substring(0, tagIdx).trim());
                        setActiveTagline(result.substring(tagIdx + 8).trim());
                    } else {
                        setReading(result.trim());
                        setActiveTagline(TAGLINE_OPTIONS[0]);
                    }
                    setTimeout(() => document.getElementById('reading-display')?.scrollIntoView({ behavior: 'smooth' }), 300);
                } catch (err) { 
                    setError(err.message || "Connection failed. Please try again."); 
                } finally { setIsLoading(false); }
            };

            const handleRandomDraw = () => {
                setIsLoading(true); setDrawnCards([]); setReading("");
                const shuffled = [...TAROT_DECK].sort(() => 0.5 - Math.random());
                const selected = shuffled.slice(0, 3).map(c => ({ 
                    ...c, 
                    isReversed: Math.random() > 0.5, 
                    id: Math.random().toString(36).substr(2, 9) 
                }));
                setDrawnCards(selected);
                generateReading(selected);
            };

            const flipCard = (idx) => {
                const next = [...manualSelection];
                if (next[idx]) {
                    next[idx] = { ...next[idx], isReversed: !next[idx].isReversed };
                    setManualSelection(next);
                    if (drawnCards.length > 0) setDrawnCards(next);
                }
            };

            return (
                <div className="min-h-screen bg-[#fcfcf7] silk-texture text-zinc-900 font-serif pb-24 px-5 pt-8 text-center touch-pan-y">
                    <header className="mb-10 border-b border-zinc-100 pb-10 max-w-md mx-auto">
                        <div className="flex justify-center mb-3">
                             <div className="w-12 h-[1px] bg-zinc-200 mt-2 mr-3" />
                             <div className="w-1 h-1 rounded-full bg-amber-500 mt-1.5" />
                             <div className="w-12 h-[1px] bg-zinc-200 mt-2 ml-3" />
                        </div>
                        <h1 className="text-3xl sm:text-5xl font-extralight tracking-[0.45em] text-zinc-900 mb-2 iPhoneTitle whitespace-nowrap overflow-hidden">ESSENTIAL</h1>
                        <p className="text-[9px] tracking-[0.3em] text-zinc-400 uppercase font-sans font-bold mb-8 tracking-widest">Chloe Zarka Grinsnir</p>
                        
                        <div className="inline-flex items-center gap-3 px-6 py-2 bg-white border border-zinc-100 rounded-full shadow-sm">
                            <span className="text-[9px] uppercase font-sans font-bold text-zinc-400">Sign:</span>
                            <div className="relative flex items-center">
                                <select value={userZodiac} onChange={(e) => setUserZodiac(e.target.value)} className="appearance-none bg-transparent pr-6 text-xs font-bold uppercase outline-none cursor-pointer font-sans tracking-widest text-zinc-800">
                                    {ZODIAC_SIGNS.map(s => <option key={s} value={s}>{s}</option>)}
                                </select>
                                <Icon name="ChevronDown" size={14} className="absolute right-0 text-amber-500 pointer-events-none" />
                            </div>
                        </div>
                    </header>

                    <nav className="flex justify-center mb-12 max-w-md mx-auto">
                        <div className="bg-zinc-100 p-1 rounded-full flex w-full max-w-[260px] border border-zinc-200/50 shadow-inner">
                            <button onClick={() => { setSelectionMode('random'); setReading(""); setDrawnCards([]); }} className={`flex-1 py-2.5 rounded-full text-[10px] uppercase font-bold tracking-widest transition-all duration-300 ${selectionMode === 'random' ? 'bg-zinc-900 text-white shadow-lg' : 'text-zinc-500'}`}>Random</button>
                            <button onClick={() => { setSelectionMode('manual'); setReading(""); setDrawnCards([]); }} className={`flex-1 py-2.5 rounded-full text-[10px] uppercase font-bold tracking-widest transition-all duration-300 ${selectionMode === 'manual' ? 'bg-zinc-900 text-white shadow-lg' : 'text-zinc-500'}`}>Manual</button>
                        </div>
                    </nav>

                    <section className="mb-14 max-w-md mx-auto relative">
                        {selectionMode === 'random' ? (
                            <button onClick={handleRandomDraw} disabled={isLoading} className="group relative px-14 py-5 bg-white border border-zinc-200 rounded-full flex items-center gap-4 shadow-xl active:scale-95 transition-all mx-auto">
                                <Icon name="Compass" size={20} className={isLoading ? 'animate-spin text-amber-500' : 'text-amber-500'} />
                                <span className="text-[11px] uppercase font-bold tracking-[0.25em] font-sans text-zinc-800">Invoke Oracle</span>
                            </button>
                        ) : (
                            <div className="space-y-10 animate-fade-in">
                                <div className="flex justify-center gap-4">
                                    {[0, 1, 2].map(idx => {
                                        const card = manualSelection[idx];
                                        return (
                                            <div key={idx} className="relative">
                                                <button onClick={() => { setActivePickerSlot(idx); setIsPickerOpen(true); }} className={`w-[102px] h-[162px] sm:w-[120px] sm:h-[185px] rounded-2xl border-2 transition-all duration-500 flex flex-col items-center justify-center bg-white relative ${card ? 'border-zinc-800 shadow-2xl scale-[1.03]' : 'border-dashed border-zinc-200 hover:border-amber-200 bg-zinc-50/20'}`}>
                                                    {card ? (
                                                        <div className={`p-4 h-full w-full flex flex-col items-center justify-between text-center transition-transform duration-500 ${card.isReversed ? 'rotate-180' : ''}`}>
                                                             <div className="opacity-60 transform scale-[0.65] mt-4"><EssentialIcon type={card.suit === "Major" ? "Major" : card.suit} /></div>
                                                             <span className="text-[10px] font-bold text-zinc-900 leading-tight uppercase font-sans tracking-tighter mb-4 line-clamp-3">{card.name}</span>
                                                        </div>
                                                    ) : (
                                                        <div className="opacity-10 flex flex-col items-center">
                                                            <Icon name="Sparkles" size={24} className="mb-3" />
                                                            <span className="text-[8px] uppercase tracking-widest font-sans font-bold">Slot {idx+1}</span>
                                                        </div>
                                                    )}
                                                    <div className="absolute inset-[4px] border border-zinc-50 rounded-[14px] pointer-events-none opacity-40" />
                                                </button>
                                                {card && (
                                                    <div className="absolute -top-3 -right-3 flex flex-col gap-2 z-20">
                                                        <button onClick={(e) => { e.stopPropagation(); flipCard(idx); }} className="p-2.5 bg-white rounded-full border border-zinc-100 shadow-lg text-amber-500 active:scale-90"><Icon name="RotateCw" size={14}/></button>
                                                        <button onClick={(e) => { e.stopPropagation(); const n = [...manualSelection]; n[idx] = null; setManualSelection(n); setDrawnCards([]); }} className="p-2.5 bg-white rounded-full border border-zinc-100 shadow-lg text-red-400 active:scale-90"><Icon name="X" size={14}/></button>
                                                    </div>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>
                                <button onClick={() => { setDrawnCards(manualSelection); generateReading(manualSelection); }} disabled={manualSelection.includes(null) || isLoading} className={`px-16 py-4 rounded-full font-bold uppercase text-[10px] tracking-[0.4em] shadow-xl transition-all ${!manualSelection.includes(null) ? 'bg-zinc-900 text-white hover:scale-105 active:scale-95' : 'bg-zinc-100 text-zinc-300'}`}>Synthesize Spread</button>
                            </div>
                        )}
                    </section>

                    {drawnCards.length > 0 && !isLoading && (
                        <div className="grid grid-cols-3 gap-4 mb-16 animate-fade-in max-w-md mx-auto">
                            {drawnCards.map((card, i) => (
                                <div key={card.id || i} className={`aspect-[5/8] bg-white rounded-xl border border-zinc-100 shadow-lg overflow-hidden transition-all duration-700 ${card.isReversed ? 'rotate-180' : ''}`}>
                                    <div className="h-full w-full p-4 flex flex-col items-center justify-between text-center relative bg-white">
                                        <div className="text-[7px] font-bold text-zinc-300 border-b border-zinc-50 pb-2 w-full uppercase tracking-widest">{card.suit}</div>
                                        <div className="flex-1 flex flex-col items-center justify-center py-2">
                                            <div className="transform scale-[0.6] opacity-80"><EssentialIcon type={card.suit === "Major" ? "Major" : card.suit} /></div>
                                            <h3 className="text-[10px] font-light italic text-zinc-900 mt-2 line-clamp-3 leading-tight px-1">{card.name}</h3>
                                        </div>
                                        <div className="absolute inset-[4px] border border-zinc-50 rounded-[10px] pointer-events-none opacity-30" />
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}

                    {(isLoading || reading || error) && (
                        <section id="reading-display" className="max-w-md mx-auto bg-white rounded-[2.5rem] p-8 mb-16 shadow-2xl text-left animate-fade-in relative border border-zinc-100 overflow-hidden">
                            <div className="absolute top-0 right-0 p-10 opacity-[0.03] pointer-events-none"><Icon name="Sparkles" size={160} /></div>
                            <div className="flex items-center gap-5 mb-12 border-b border-zinc-50 pb-10">
                                <div className="p-4 bg-amber-50 rounded-[2rem] text-amber-500 shadow-inner"><Icon name="Sparkles" size={28} /></div>
                                <div><h2 className="text-3xl font-light tracking-tight text-zinc-900 leading-tight">Interpretation</h2><p className="text-[10px] uppercase font-bold text-zinc-400 mt-2 font-sans tracking-[0.25em]">Vibrations Decoded</p></div>
                                {isLoading && <div className="animate-spin text-zinc-200 ml-auto"><Icon name="RefreshCw" size={24}/></div>}
                            </div>
                            {isLoading ? (
                                <div className="space-y-6 py-6 opacity-40">
                                    {[1,2,3].map(i => <div key={i} className="h-4 bg-zinc-100 rounded-full animate-pulse" style={{ width: `${80 + Math.random()*20}%` }} />)}
                                </div>
                            ) : error ? (
                                <div className="py-12 text-center text-red-400 text-xs font-bold uppercase tracking-widest leading-loose">
                                    {error}
                                    <div className="mt-4 text-zinc-400 lowercase italic normal-case">Check console for key details if hosting externally.</div>
                                </div>
                            ) : (
                                <div className="space-y-10 text-zinc-800 text-xl font-light leading-relaxed first-letter:text-6xl first-letter:float-left first-letter:mr-4 first-letter:text-amber-500 first-letter:font-extralight first-letter:leading-none">
                                    {reading.split('\n').map((p,i) => p.trim() && <p key={i}>{p}</p>)}
                                </div>
                            )}
                            {!isLoading && !error && (
                                <div className="mt-20 pt-8 border-t border-zinc-50 flex flex-col items-center gap-6">
                                    <div className="flex items-center gap-3">
                                        <div className="w-1.5 h-1.5 rounded-full bg-amber-400 shadow-lg shadow-amber-400/30" />
                                        <span className="text-[10px] uppercase tracking-[0.25em] text-zinc-400 font-bold font-sans">Querent: {userZodiac} Signature</span>
                                    </div>
                                    <div className="text-zinc-300 italic text-[11px] text-center uppercase tracking-[0.15em] font-medium leading-relaxed">{activeTagline}</div>
                                </div>
                            )}
                        </section>
                    )}

                    {isPickerOpen && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-zinc-900/10 backdrop-blur-2xl animate-fade-in touch-none">
                            <div className="bg-[#fcfcf9] border border-white w-full max-w-lg h-[88vh] rounded-[3rem] overflow-hidden flex flex-col shadow-2xl touch-auto">
                                <div className="p-8 border-b border-zinc-100 flex justify-between items-center bg-white/50 shrink-0">
                                    <div><h3 className="text-2xl font-light uppercase text-zinc-900 leading-tight">The Library</h3><p className="text-[9px] uppercase font-bold text-zinc-400 tracking-widest mt-1">Select for Mirror Slot {activePickerSlot + 1}</p></div>
                                    <button onClick={() => setIsPickerOpen(false)} className="text-zinc-300 hover:text-zinc-900 p-3 transition-colors active:scale-90"><Icon name="X" size={36}/></button>
                                </div>
                                <div className="px-8 py-5 bg-white border-b border-zinc-100 flex items-center shrink-0">
                                    <Icon name="Search" size={20} className="text-zinc-200 mr-5" />
                                    <input type="text" placeholder="Filter essences..." className="w-full py-2 text-xl outline-none font-sans bg-transparent" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} />
                                </div>
                                <div className="flex-1 overflow-y-auto p-6 bg-zinc-50/20 momentum-scroll">
                                    {Object.entries(groupedDeck).map(([suit, cards]) => (
                                        cards.length > 0 && (
                                            <div key={suit} className="mb-12 last:mb-0 px-2 text-left">
                                                <div className="flex items-center gap-4 mb-6"><span className="text-[11px] uppercase font-bold tracking-[0.35em] text-amber-600 font-sans">{suit}</span><div className="flex-1 h-[1px] bg-amber-100/50" /></div>
                                                <div className="grid grid-cols-2 gap-4">
                                                    {cards.map(c => {
                                                        const taken = manualSelection.some(ms => ms?.name === c.name);
                                                        return (
                                                            <button key={c.name} disabled={taken} onClick={() => {
                                                                const n = [...manualSelection];
                                                                n[activePickerSlot] = { ...c, isReversed: false, id: Math.random().toString(36).substr(2,9) };
                                                                setManualSelection(n);
                                                                setIsPickerOpen(false);
                                                            }} className={`aspect-[4/5] p-5 rounded-3xl border transition-all relative overflow-hidden flex flex-col justify-between group ${taken ? 'bg-zinc-100 opacity-20 cursor-not-allowed grayscale' : 'bg-white border-zinc-100 active:border-amber-400 shadow-sm active:scale-[0.98]'}`}>
                                                                <div className="opacity-30 group-hover:opacity-100 transition-opacity transform scale-[0.4] origin-top-left"><EssentialIcon type={c.suit === "Major" ? "Major" : c.suit} /></div>
                                                                <div className="text-sm font-medium leading-tight text-zinc-800 font-sans">{c.name}</div>
                                                                {taken && <div className="absolute inset-0 bg-white/20" />}
                                                                {!taken && <div className="absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity"><Icon name="CheckCircle" size={16} className="text-amber-500" /></div>}
                                                            </button>
                                                        );
                                                    })}
                                                </div>
                                            </div>
                                        )
                                    ))}
                                </div>
                                <div className="p-8 border-t border-zinc-100 flex justify-end bg-white/80 backdrop-blur-md shrink-0"><button onClick={() => setIsPickerOpen(false)} className="px-14 py-4 bg-zinc-900 text-white rounded-full font-bold uppercase text-[10px] tracking-widest shadow-xl font-sans active:scale-95 transition-transform">Close</button></div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>
