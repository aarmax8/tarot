<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Tarot Oracle</title>
    <style>
        /* --- NATIVE SYSTEM STYLING (No External Libraries) --- */
        :root {
            --ios-blue: #007aff;
            --ios-bg: #000000;
            --ios-card: #1c1c1e;
            --ios-text: #ffffff;
            --ios-gray: #8e8e93;
            --gold: #ffd700;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--ios-bg);
            color: var(--ios-text);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            user-select: none;
        }

        /* Layout */
        #app { height: 100vh; display: flex; flex-direction: column; position: relative; }

        header {
            position: fixed; top: 0; width: 100%; z-index: 50;
            background: rgba(28, 28, 30, 0.8);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-bottom: 0.5px solid rgba(255, 255, 255, 0.1);
            padding: 55px 20px 15px 20px; text-align: center;
        }

        header h1 { margin: 0; font-size: 17px; font-weight: 600; letter-spacing: -0.4px; }

        main { flex: 1; overflow-y: auto; padding: 110px 20px 150px 20px; }

        /* Navigation */
        nav {
            position: fixed; bottom: 0; width: 100%; z-index: 50;
            background: rgba(28, 28, 30, 0.8);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-top: 0.5px solid rgba(255, 255, 255, 0.1);
            display: flex; justify-content: space-around;
            padding: 10px 20px 35px 20px;
        }

        .tab { display: flex; flex-direction: column; align-items: center; color: var(--ios-gray); text-decoration: none; font-size: 10px; font-weight: 500; cursor: pointer; }
        .tab.active { color: var(--ios-blue); }
        .tab-icon { font-size: 24px; margin-bottom: 4px; }

        /* Home View */
        .hero { display: flex; flex-direction: column; align-items: center; text-align: center; padding-top: 40px; animation: fadeIn 0.4s ease; }
        .app-icon { width: 90px; height: 90px; background: linear-gradient(135deg, #f59e0b, #fbbf24); border-radius: 20px; display: flex; items-center; justify-content: center; font-size: 50px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); line-height: 90px; }
        .hero h2 { font-size: 34px; margin: 0 0 10px 0; letter-spacing: -1px; }
        .hero p { color: var(--ios-gray); font-size: 17px; line-height: 1.3; padding: 0 20px; margin-bottom: 40px; }
        
        .btn { 
            background: var(--ios-blue); color: white; border: none; width: 100%; max-width: 300px;
            height: 50px; border-radius: 12px; font-size: 17px; font-weight: 600; cursor: pointer;
            transition: opacity 0.2s;
        }
        .btn:active { opacity: 0.6; }

        /* Reading View */
        .spread { display: flex; flex-direction: column; gap: 40px; align-items: center; padding-bottom: 50px; }
        .spread-item { text-align: center; width: 100%; animation: slideUp 0.5s ease backwards; }
        .label { font-size: 11px; font-weight: 700; color: var(--gold); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px; opacity: 0.7; }
        
        .card {
            width: 200px; height: 310px; background: linear-gradient(145deg, #2c2c2e, #1c1c1e);
            border-radius: 18px; border: 1px solid rgba(255,255,255,0.1);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            margin: 0 auto; box-shadow: 0 20px 40px rgba(0,0,0,0.6); position: relative;
        }
        .card.reversed { transform: rotate(180deg); }
        .card-emoji { font-size: 70px; margin-bottom: 20px; }
        .card-name { font-size: 18px; font-weight: 700; color: #ffd700; padding: 0 15px; }

        .meaning { margin-top: 20px; font-size: 15px; color: var(--ios-gray); font-style: italic; line-height: 1.4; padding: 0 30px; }

        /* Deck View */
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .grid-item { background: var(--ios-card); border-radius: 12px; aspect-ratio: 2/3; display: flex; flex-direction: column; align-items: center; justify-content: center; border: 0.5px solid rgba(255,255,255,0.05); }
        .grid-item span { font-size: 24px; margin-bottom: 4px; }
        .grid-item small { font-size: 8px; text-transform: uppercase; color: var(--ios-gray); text-align: center; padding: 0 4px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 100%; }

        /* Bottom Sheet */
        #overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 90; display: none; }
        #sheet {
            position: fixed; bottom: 0; left: 0; right: 0; background: #1c1c1e;
            border-radius: 20px 20px 0 0; z-index: 100; padding: 20px;
            transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.1, 0.9, 0.2, 1);
            padding-bottom: 60px; text-align: center;
        }
        #sheet.active { transform: translateY(0); }
        .handle { width: 36px; height: 5px; background: #3a3a3c; border-radius: 3px; margin: 0 auto 20px auto; }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="app">
        <header>
            <h1 id="view-title">Oracle</h1>
        </header>

        <main id="main-content"></main>

        <nav>
            <div class="tab active" id="tab-home" onclick="app.nav('home')">
                <span class="tab-icon">âœ¨</span>
                <span>Home</span>
            </div>
            <div class="tab" id="tab-reading" onclick="app.nav('reading')">
                <span class="tab-icon">ðŸ”®</span>
                <span>Reading</span>
            </div>
            <div class="tab" id="tab-deck" onclick="app.nav('deck')">
                <span class="tab-icon">ðŸ“–</span>
                <span>Library</span>
            </div>
        </nav>
    </div>

    <!-- Modal Details -->
    <div id="overlay" onclick="app.close()"></div>
    <div id="sheet">
        <div class="handle"></div>
        <div id="sheet-body"></div>
    </div>

    <script>
        // --- ALL DATA INLINED ---
        const DECK = [
            { id: 0, n: "The Fool", i: "ðŸƒ", u: "New beginnings, optimism.", r: "Recklessness, folly." },
            { id: 1, n: "Magician", i: "ðŸª„", u: "Manifestation, power.", r: "Manipulation, poor planning." },
            { id: 2, n: "Priestess", i: "ðŸŒ™", u: "Intuition, subconscious.", r: "Secrets, withdrawal." },
            { id: 3, n: "Empress", i: "ðŸŒ¿", u: "Abundance, nature.", r: "Dependence, block." },
            { id: 4, n: "Emperor", i: "ðŸ‘‘", u: "Authority, structure.", r: "Rigidity, domination." },
            { id: 5, n: "Hierophant", i: "ðŸ›ï¸", u: "Tradition, wisdom.", r: "Challenging status quo." },
            { id: 6, n: "Lovers", i: "â¤ï¸", u: "Harmony, choices.", r: "Self-love, disharmony." },
            { id: 7, n: "Chariot", i: "âš”ï¸", u: "Victory, control.", r: "Aggression, lack of will." },
            { id: 8, n: "Strength", i: "ðŸ¦", u: "Courage, influence.", r: "Self-doubt, low energy." },
            { id: 9, n: "Hermit", i: "ðŸ®", u: "Introspection, soul-searching.", r: "Loneliness, withdrawal." },
            { id: 10, n: "Fortune", i: "ðŸŽ¡", u: "Good luck, destiny.", r: "Bad luck, resistance." },
            { id: 11, n: "Justice", i: "âš–ï¸", u: "Truth, cause and effect.", r: "Unfairness, dishonesty." },
            { id: 12, n: "Hanged Man", i: "ðŸ‘£", u: "Pause, surrender.", r: "Stalling, resistance." },
            { id: 13, n: "Death", i: "ðŸ’€", u: "Endings, change.", r: "Resistance to change." },
            { id: 14, n: "Temperance", i: "ðŸ·", u: "Balance, patience.", r: "Imbalance, excess." },
            { id: 15, name: "The Devil", i: "ðŸ”¥", u: "Shadow self, attachment.", r: "Detachment, release." },
            { id: 16, n: "The Tower", i: "âš¡", u: "Sudden upheaval.", r: "Averting disaster." },
            { id: 17, n: "The Star", i: "âœ¨", u: "Hope, renewal.", r: "Despair, lack of faith." },
            { id: 18, n: "The Moon", i: "ðŸŒ’", u: "Fear, subconscious.", r: "Release of fear." },
            { id: 19, n: "The Sun", i: "â˜€ï¸", u: "Vitality, fun.", r: "Inner child, sadness." },
            { id: 20, n: "Judgement", i: "ðŸŽº", u: "Rebirth, calling.", r: "Self-doubt, doubt." },
            { id: 21, n: "The World", i: "ðŸŒ", u: "Completion, travel.", r: "Seeking closure." }
        ];

        const app = {
            view: 'home',
            spread: [],

            init() {
                this.nav('home');
            },

            nav(v) {
                this.view = v;
                const content = document.getElementById('main-content');
                const title = document.getElementById('view-title');
                
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.getElementById('tab-'+v).classList.add('active');

                if (v === 'home') {
                    title.innerText = 'Oracle';
                    content.innerHTML = `
                        <div class="hero">
                            <div class="app-icon">ðŸ”®</div>
                            <h2>Daily Oracle</h2>
                            <p>Unlock the secrets of the universe. Your journey into the unknown begins with a single card.</p>
                            <button class="btn" onclick="app.draw()">Get Reading</button>
                        </div>
                    `;
                } else if (v === 'reading') {
                    title.innerText = 'Reading';
                    if (this.spread.length === 0) {
                        content.innerHTML = `<div class="hero" style="padding-top:100px"><p>No reading active.</p><button class="btn" onclick="app.draw()">Draw Now</button></div>`;
                    } else {
                        content.innerHTML = `<div class="spread">
                            ${this.spread.map((c, i) => `
                                <div class="spread-item" style="animation-delay: ${i*0.15}s">
                                    <div class="label">${['Past', 'Present', 'Future'][i]}</div>
                                    <div class="card ${c.r ? 'reversed' : ''}" onclick="app.open(${c.id}, ${c.r})">
                                        <div class="card-emoji">${c.i}</div>
                                        <div class="card-name">${c.n}</div>
                                    </div>
                                    <div class="meaning">"${c.r ? c.meaningR : c.meaningU}"</div>
                                </div>
                            `).join('')}
                            <button class="btn" style="background:#2c2c2e; margin-top:20px" onclick="app.draw()">New Reading</button>
                        </div>`;
                    }
                } else if (v === 'deck') {
                    title.innerText = 'The Library';
                    content.innerHTML = `<div class="grid">${DECK.map(c => `<div class="grid-item" onclick="app.open(${c.id}, false)"><span>${c.i}</span><small>${c.n}</small></div>`).join('')}</div>`;
                }
            },

            draw() {
                this.spread = [...DECK]
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 3)
                    .map(c => ({
                        ...c,
                        r: Math.random() > 0.7,
                        meaningU: c.u,
                        meaningR: c.r
                    }));
                this.nav('reading');
            },

            open(id, isRev) {
                const c = DECK.find(x => x.id === id);
                const body = document.getElementById('sheet-body');
                body.innerHTML = `
                    <div style="margin-bottom:30px">
                        <div class="card ${isRev ? 'reversed' : ''}" style="width:140px; height:220px; margin-bottom:20px">
                            <div style="font-size:50px">${c.i}</div>
                            <div style="font-size:14px; font-weight:bold; color:#ffd700">${c.n}</div>
                        </div>
                        <h3 style="margin:0; font-size:20px">${c.n} ${isRev ? '(Reversed)' : ''}</h3>
                    </div>
                    <div style="text-align:left; gap:20px; display:flex; flex-direction:column">
                        <div>
                            <div style="color:var(--ios-blue); font-size:11px; font-weight:bold; text-transform:uppercase; margin-bottom:4px">Upright</div>
                            <p style="margin:0; font-size:16px; color:#fff">"${c.u}"</p>
                        </div>
                        <div style="padding-top:15px; border-top:1px solid rgba(255,255,255,0.05)">
                            <div style="color:#ff3b30; font-size:11px; font-weight:bold; text-transform:uppercase; margin-bottom:4px">Reversed</div>
                            <p style="margin:0; font-size:16px; color:#fff">"${c.r}"</p>
                        </div>
                    </div>
                    <button class="btn" style="background:#3a3a3c; margin-top:40px" onclick="app.close()">Dismiss</button>
                `;
                document.getElementById('overlay').style.display = 'block';
                document.getElementById('sheet').classList.add('active');
            },

            close() {
                document.getElementById('overlay').style.display = 'none';
                document.getElementById('sheet').classList.remove('active');
            }
        };

        // Start app immediately
        window.addEventListener('DOMContentLoaded', () => app.init());
    </script>
</body>
</html>
